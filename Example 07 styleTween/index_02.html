<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chained Reaction</title>
    <style>
        svg{
            width: 50vw;
            height: 50vw;
            background-color: #efefef;
            margin: 0;
        }
    </style>
</head>
<body>
<script src="../lib/d3.js"></script>
<script>
//const [nX,nY] = [100,100]; // Variable Destructuring assignment
//[... Array(nX*nY).keys()].map()

const svg = d3.selectAll('body')
    .append("svg")
    .attr("viewBox","0 0 1000 1000");
// Horizontal line
svg.append('line')
    .attr("x1",0)
    .attr("y1",500)
    .attr("x2",1000)
    .attr("y2",500)
    .attr("stroke","black")
    .attr("stroke-width","1px");
svg.append('line')
    .attr("x1",500)
    .attr("y1",0)
    .attr("x2",500)
    .attr("y2",1000)
    .attr("stroke","black")
    .attr("stroke-width","1px");

let line_coordinates = []

const dot = svg.append("circle")
    .attr("cx","500")
    .attr("cy","500")
    .attr("r","20").attr("fill","black");
dot.transition()
    .duration(3000)
    .on("start",function repeat(){
        d3.active(this)
            .attr("cy",900)
            .transition()
            .attr("cy",100)
            .transition()
            .on("start",repeat)
    })

radius = 100
spacing =3
let points = Array(Math.floor((radius * 2 / spacing))).fill(0)
points = points.map((d,i) => {
    const r = radius - i * Math.pow(spacing,2+(.01*i)) / 2;
    const y = r * (i%2 === 0 ? 2 : -2);
    return ({radius: r, y: y});
});
const spiral = svg.append('path')
    .attr("d", `M ${500},${500}
              ${points.map(d => `a ${d.radius} ${d.radius} 0 1 1 0 ${d.y}`).join(' ')}`)
spiral.attr('fill','none').attr("stroke","black")

console.log(points)
</script>
</body>
</html>